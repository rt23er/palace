<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.AigcDao">

    <resultMap type="com.example.Aigc.entity.Aigc" id="AigcMap">
        <result property="AiID" column="Ai_id" jdbcType="VARCHAR"/>
        <result property="UserID" column="User_id" jdbcType="VARCHAR"/>
        <result property="userMessage" column="message" jdbcType="VARCHAR"/>
        <result property="Answer" column="answer" jdbcType="VARCHAR"/>
        <result property="CreatDate" column="Creat_date" jdbcType="DATE"/>
    </resultMap>


    <!--新增-->
    <insert id="insert" keyProperty="AiId" useGeneratedKeys="true">
        insert into ai(Ai_id,User_id, message, answer, Creat_date)
        values (#{AiID},#{UserID}, #{userMessage}, #{Answer}, #{CreatDate})
    </insert>

    <select id="selectStateByUserId" resultMap="AigcMap">
        SELECT a.message,a.answer,a.Creat_date
        FROM ai AS a
        WHERE a.User_id= #{UserID}
        ORDER BY a.Creat_date DESC LIMIT 10
    </select>

</mapper>

